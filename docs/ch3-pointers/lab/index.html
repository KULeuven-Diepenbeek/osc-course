<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.59.1" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>3.2: The Ancient Library :: Operating Systems and C</title>

    
    <link href="../../css/nucleus.css?1582123184" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1582123184" rel="stylesheet">
    <link href="../../css/hybrid.css?1582123184" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1582123184" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1582123184" rel="stylesheet">
    <link href="../../css/auto-complete.css?1582123184" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1582123184" rel="stylesheet">
    <link href="../../css/theme.css?1582123184" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1582123184" rel="stylesheet">
    
      <link href="../../css/theme-kul.css?1582123184" rel="stylesheet">
    

    <script src="../../js/jquery-3.3.1.min.js?1582123184"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
      <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>

<script>
window.MathJax = {
  chtml: {
    scale: 2,                      
    minScale: .5,                  
    matchFontHeight: true,         
    mtextInheritFont: false,       
    merrorInheritFont: true,       
    mathmlSpacing: false,          
    skipAttributes: {},            
    exFactor: .5,                  
    displayAlign: 'center',        
    displayIndent: '0'             
  }
};
</script>
  </head>
  <body class="" data-url="/ch3-pointers/lab/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
	<img src="../../img/style/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
	<img src="../../img/style/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1582123184"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1582123184"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/osc-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1582123184"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/ch1-c/" title="1: Introduction in C" class="dd-item 
        
        
        
        ">
      <a href="../../ch1-c/">
          <i class='far fa-keyboard'></i> 1: Introduction in C
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch1-c/intro/" title="1.1: The C programming language" class="dd-item ">
        <a href="../../ch1-c/intro/">
        <i class='fas fa-book'></i> 1.1: The C programming language
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch1-c/intro-labs/" title="1.2: String Manipulation" class="dd-item ">
        <a href="../../ch1-c/intro-labs/">
        <i class='fas fa-vial'></i> 1.2: String Manipulation
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch1-c/structs/" title="1.3: Creating order: Structures" class="dd-item ">
        <a href="../../ch1-c/structs/">
        <i class='fas fa-book'></i> 1.3: Creating order: Structures
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch1-c/structs-labs/" title="1.4: Structs" class="dd-item ">
        <a href="../../ch1-c/structs-labs/">
        <i class='fas fa-vial'></i> 1.4: Structs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch1-c/ecosystems/" title="1.5: C Ecosystems" class="dd-item ">
        <a href="../../ch1-c/ecosystems/">
        <i class='fas fa-book'></i> 1.5: C Ecosystems
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch1-c/ecosystems-labs/" title="1.6: Splitting up Code" class="dd-item ">
        <a href="../../ch1-c/ecosystems-labs/">
        <i class='fas fa-vial'></i> 1.6: Splitting up Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch2-interrupts/" title="2: Interrupts" class="dd-item 
        
        
        
        ">
      <a href="../../ch2-interrupts/">
          <i class='fab fa-linux'></i> 2: Interrupts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch2-interrupts/theory1_arduino/" title="2.1 Arduino UNO" class="dd-item ">
        <a href="../../ch2-interrupts/theory1_arduino/">
        <i class='fab fa-linux'></i> 2.1 Arduino UNO
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch2-interrupts/lab1_arduino-bm/" title="2.2: Bare metal Arduino" class="dd-item ">
        <a href="../../ch2-interrupts/lab1_arduino-bm/">
        <i class='fas fa-vial'></i> 2.2: Bare metal Arduino
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch2-interrupts/theory2_timer/" title="2.3 The timer" class="dd-item ">
        <a href="../../ch2-interrupts/theory2_timer/">
        <i class='fab fa-linux'></i> 2.3 The timer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch2-interrupts/lab2_rocketlaunch/" title="2.4: Launch that rocket !!" class="dd-item ">
        <a href="../../ch2-interrupts/lab2_rocketlaunch/">
        <i class='fas fa-vial'></i> 2.4: Launch that rocket !!
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch2-interrupts/theory3_interrupt/" title="2.5 The internals of interrupts" class="dd-item ">
        <a href="../../ch2-interrupts/theory3_interrupt/">
        <i class='fab fa-linux'></i> 2.5 The internals of interrupts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch3-pointers/" title="3: Pointers &amp; Arrays" class="dd-item 
        parent
        
        
        ">
      <a href="../../ch3-pointers/">
          <i class='far fa-keyboard'></i> 3: Pointers &amp; Arrays
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch3-pointers/pointers/" title="3.1: Pointers and arrays" class="dd-item ">
        <a href="../../ch3-pointers/pointers/">
        <i class='far fa-keyboard'></i> 3.1: Pointers and arrays
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch3-pointers/lab/" title="3.2: The Ancient Library" class="dd-item active">
        <a href="../../ch3-pointers/lab/">
        <i class='fas fa-vial'></i> 3.2: The Ancient Library
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch4-debugging/" title="4: Debugging" class="dd-item 
        
        
        
        ">
      <a href="../../ch4-debugging/">
          <i class='far fa-keyboard'></i> 4: Debugging
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch4-debugging/debugging-ide/" title="4.1: The Easy Way: IDEs" class="dd-item ">
        <a href="../../ch4-debugging/debugging-ide/">
        <i class='far fa-keyboard'></i> 4.1: The Easy Way: IDEs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch4-debugging/debugging-gdb/" title="4.2: The Hard Way: GDB" class="dd-item ">
        <a href="../../ch4-debugging/debugging-gdb/">
        <i class='fas fa-vial'></i> 4.2: The Hard Way: GDB
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch4-debugging/testing/" title="4.3: The Middle Way: TDD" class="dd-item ">
        <a href="../../ch4-debugging/testing/">
        <i class='far fa-keyboard'></i> 4.3: The Middle Way: TDD
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch5-introos/" title="5: Intro in OS" class="dd-item 
        
        
        
        ">
      <a href="../../ch5-introos/">
          <i class='fab fa-linux'></i> 5: Intro in OS
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch5-introos/intro-os/" title="5.1: Intro to OS using Linux" class="dd-item ">
        <a href="../../ch5-introos/intro-os/">
        <i class='fas fa-book'></i> 5.1: Intro to OS using Linux
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch6-tasks/" title="6: Tasks" class="dd-item 
        
        
        
        ">
      <a href="../../ch6-tasks/">
          <i class='fab fa-linux'></i> 6: Tasks
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch6-tasks/tasks/" title="6.1: Task management" class="dd-item ">
        <a href="../../ch6-tasks/tasks/">
        <i class='fas fa-book'></i> 6.1: Task management
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch6-tasks/tasks-lab/" title="6.2: Task management labs" class="dd-item ">
        <a href="../../ch6-tasks/tasks-lab/">
        <i class='fas fa-vial'></i> 6.2: Task management labs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch6-tasks/intertasks/" title="6.3: Inter-task communication" class="dd-item ">
        <a href="../../ch6-tasks/intertasks/">
        <i class='fas fa-book'></i> 6.3: Inter-task communication
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch6-tasks/intertasks-lab/" title="6.4: Inter-task labs" class="dd-item ">
        <a href="../../ch6-tasks/intertasks-lab/">
        <i class='fas fa-vial'></i> 6.4: Inter-task labs
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch7-stack/" title="7: The Stack &amp; The Heap" class="dd-item 
        
        
        
        ">
      <a href="../../ch7-stack/">
          <i class='far fa-keyboard'></i> 7: The Stack &amp; The Heap
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch7-stack/stackvsheap/" title="7.1: The Stack &amp; the Heap" class="dd-item ">
        <a href="../../ch7-stack/stackvsheap/">
        <i class='fas fa-book'></i> 7.1: The Stack &amp; the Heap
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ch7-stack/inspection-labs/" title="7.2: Inspecting memory regions" class="dd-item ">
        <a href="../../ch7-stack/inspection-labs/">
        <i class='fas fa-vial'></i> 7.2: Inspecting memory regions
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch8-memory/" title="8: Memory Management" class="dd-item 
        
        
        
        ">
      <a href="../../ch8-memory/">
          <i class='fab fa-linux'></i> 8: Memory Management
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch8-memory/memory/" title="8.1: Memory management" class="dd-item ">
        <a href="../../ch8-memory/memory/">
        <i class='fas fa-book'></i> 8.1: Memory management
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/ch9-capitaselecta/" title="9: Capita Selecta" class="dd-item 
        
        
        
        ">
      <a href="../../ch9-capitaselecta/">
          <i class='fab fa-linux'></i> 9: Capita Selecta
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ch9-capitaselecta/capita-selecta/" title="9.1: Capita Selecta" class="dd-item ">
        <a href="../../ch9-capitaselecta/capita-selecta/">
        <i class='fas fa-book'></i> 9.1: Capita Selecta
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/exercises/" title="A. Exercises Assignments" class="dd-item 
        
        
        
        ">
      <a href="../../exercises/">
          <i class='fas fa-pencil-alt'></i> A. Exercises Assignments
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/exercises/tba/" title="To Be Announced!" class="dd-item ">
        <a href="../../exercises/tba/">
        <i class='fas fa-pen-square'></i> To Be Announced!
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/appendix/" title="B. Appendix" class="dd-item 
        
        
        
        ">
      <a href="../../appendix/">
          <i class='fab fa-github'></i> B. Appendix
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/appendix/reading/" title="1. Recommended reading" class="dd-item ">
        <a href="../../appendix/reading/">
        1. Recommended reading
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/appendix/installing/" title="2. Installation Instructions" class="dd-item ">
        <a href="../../appendix/installing/">
        2. Installation Instructions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/appendix/cheat_sheet/" title="Cheat sheet" class="dd-item ">
        <a href="../../appendix/cheat_sheet/">
        Cheat sheet
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://uhintra03.uhasselt.be/studiegidswww/opleidingsonderdeel.aspx?a=2019&amp;i=4082&amp;n=4&amp;t=01"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://kuleuven-diepenbeek.github.io/osc-course/TODO"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Operating Systems and C</a> > <a href='../../ch3-pointers/'>3: Pointers & Arrays</a> > 3.2: The Ancient Library
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#the-ancient-library">The Ancient Library</a>
<ul>
<li><a href="#1-modeling-the-books">1. Modeling the books</a></li>
<li><a href="#2-linking-things-together">2. Linking things together</a></li>
<li><a href="#3-cleaning-up-the-library">3. Cleaning up the library</a></li>
<li><a href="#4-wild-surge-asc-desc">4. Wild Surge! ASC/DESC</a></li>
<li><a href="#5-do-you-rest-until-fully-healed">5. Do you rest until fully healed?</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              3.2: The Ancient Library
            </h1>
          

        





<h2 id="the-ancient-library">The Ancient Library</h2>

<blockquote>
<p>Stuff just got interesting: you find yourself inside an extremely old library, where things clearly have not been touched for ages. A green glowing ball rests in the center of the room, giving the books an odd, but compelling color. Do you dare to touch the books? Let us go ahead and clean this place up a bit. (<a href="https://dublin2019.com/3906-2/fantasy-library-art-736x459/">img src</a>)</p>
</blockquote>

<p><img src="../../img/labs/library.png" alt="Library" /></p>

<h3 id="1-modeling-the-books">1. Modeling the books</h3>

<p>The back of the first row of books is barely readable, but you can distinguish the following titles and authors:</p>

<ul>
<li><em>Cleaning the streets Beyond the Gate</em>, by <em>Ulder Ravengard</em></li>
<li><em>Beyond the depths of the Underdark</em>, by <em>Drizzt Do&rsquo;Urden</em></li>
<li><em>Ancient Aberrations and how to prevent them</em>, by <em>Elminster Aumar</em></li>
<li><em>Killing people with cows: the ins and outs of Wild Magic</em>, by <em>Neera</em></li>
</ul>

<p>How should we proceed to model the concept of a book? Right, a <code>struct</code>! Keep track of the title and the author using <code>char*</code> properties. <br/>
Proceed with caution and whatever you do, do not directly look into the green light! Use the following blueprint:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#75715e">#define SIZE 4
</span><span style="color:#75715e"></span>Book<span style="color:#f92672">*</span> <span style="color:#a6e22e">create_books</span>() {
    <span style="color:#75715e">// ??
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">print_books</span>(Book<span style="color:#f92672">*</span> library) {
    <span style="color:#75715e">// ??
</span><span style="color:#75715e"></span>}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    Book<span style="color:#f92672">*</span> library <span style="color:#f92672">=</span> create_books();
    print_books(library);               <span style="color:#75715e">// should print the above list ([title], by [author])
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}</code></pre></div>
<h3 id="2-linking-things-together">2. Linking things together</h3>

<p>The strcuture you provided can be expanded with a third property: <code>Book* next</code>, pointing to the next element in the row. That way, when looping through all books, we simply need to follow the &lsquo;next&rsquo; pointer, until a <code>NULL</code> is reached, indicating the end of the library. This technique makes it possible to loop through things <strong>without knowing it&rsquo;s size</strong>!</p>

<p>Rework your implementation by removing the <code>#define SIZE 4</code> statement, and by relying on the <code>next</code> pointer in the <code>print_books()</code> method.</p>

<p>Tips:</p>

<ol>
<li>What should the value of <code>next</code> be when creating the book instances in <code>create_books()</code>? What should that function return? A handle to what?</li>
<li>You can use <code>while(ptr) { ... }</code> instead of a <code>for</code> loop. The value within the <code>while()</code> statement always evaluates to <code>true</code>, unless a &ldquo;nullpointer&rdquo; (a value of <code>0</code> or <code>NULL</code>) is detected. That is exactly what we want.</li>
<li>Another method to ease use of the <code>malloc()</code> statements might come in handy, such as <code>Book* create_book(char* title, char* author)</code>.</li>
</ol>

<h3 id="3-cleaning-up-the-library">3. Cleaning up the library</h3>

<p>The place looks dusty, doesn&rsquo;t it? <br/>
Also, the books seem to be placed in a random order. Why don&rsquo;t we take the time, now that we are here and enjoy the green glow, to order these books alphabetically <strong>by author</strong>? You can ignore the surnames, simply sort on the property <code>author</code>. That is, the expected output of your program should be:</p>

<pre>
Beyond the depths of the Underdark, by Drizzt Do'Urden
Ancient Aberrations and how to prevent them, by Elminster Aumar
Killing people with cows: the ins and outs of Wild Magic, by Neera
Cleaning the streets Beyond the Gate, by Ulder Ravengard
</pre>

<p>Create and call <code>void sort_books(Book* library)</code> before printing them.</p>

<script defer src="../../mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph LR;
    H{head}
    T{tail}
    A[book 1]
    B[book 2]
    C[book 3]
    D[book 4]
    N>NULL]

    A -->|next| B
    B -->|next| C
    C -->|next| D
    D -->|next| N

    H --> A
    T --> B

</div>

<p>Tips:</p>

<ol>
<li>Use the <a href="https://www.tutorialspoint.com/c_standard_library/c_function_strcmp">strcmp()</a> function from <code>&lt;string.h&gt;</code> to compare two strings.</li>
<li>Sorting a <em>linked list</em> is not as difficult as you might think. You will need some sort of <em>swapping</em> function. Take a look at the above drawing. If book 4 needs to be first, how do you swap it with book 1, <strong>while keeping the links intact</strong>?</li>
<li>Use <em>recursion</em> to repeatedly call <code>sort_books()</code> within the same function. Which book should be placed in the beginning? What should you process next? Think in terms of <em>head</em> and <em>tail</em>.</li>
</ol>

<h3 id="4-wild-surge-asc-desc">4. Wild Surge! ASC/DESC</h3>

<blockquote>
<p>A sudden gust of wind enters the old library. You immediately halt what you were doing to carefully listen if imminent threats are upon you and your party. A cloaked figure swings open a side-door and starts casting a spell that sounds very unfamiliar to you. <em>Praeses, Alia, Fero&hellip;</em> An alteration, but which one?! Quick, hide the books! But alas, it was too late&hellip; <br/>
While the spell completes, you hear the figure cursing &ldquo;<em>annoying wild surges!</em>&rdquo;. The voice sounds like a woman. She rushes off, but the part of her face you were able to catch in the glimpse of an eye seems oddly familiar&hellip; Suddenly, you know it. The book! The cow book! That was the author! Neera&hellip;</p>
</blockquote>

<p>Neera managed to completely reverse our sorting strategy, sorting Z to A instead of A to Z. She used a function pointer to encapsulate <code>strcmp()</code>. The following is your main function:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    Book<span style="color:#f92672">*</span> library <span style="color:#f92672">=</span> create_books();
    neera_encounter();  <span style="color:#75715e">// changes a function pointer from asc to desc
</span><span style="color:#75715e"></span>
    sort_books(library);
    print_books(library);   <span style="color:#75715e">// prints Z -&gt; A
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}</code></pre></div>
<p>Create a function pointer that is initialized to the address of your ascending sorter. Neera her Wild Magic switches this to the address of a descending sorter. That pointer will be used inside <code>sort_books()</code> instead of <code>strcmp()</code>.</p>

<p>Tips:</p>

<ol>
<li>Re-read <a href="../../theory/c/chap2">chapter 2</a>!</li>
<li>You will need two extra functions, <code>asc()</code> and <code>desc()</code>, besides <code>neera_encounter()</code>.</li>
</ol>

<h3 id="5-do-you-rest-until-fully-healed">5. Do you rest until fully healed?</h3>

<blockquote>
<p>The rumble of Neera&rsquo;s spell made your head rush and you fill dizzy. Maybe it would be better for you and your party to stay for the night and set up camp. During the night, you make the time to write up on the past events. It looks like it will be quite a thick book, something new to add to the old library. Now, should you add the book at the beginning of the row, or all the way at the end?</p>
</blockquote>

<p>Create a function called <code>void add_book(Book* library, Book* book)</code>, that adds a new book to <strong>the end</strong> of the library.</p>

<script defer src="../../mermaid/mermaid.min.js">
	mermaid.initialize({
		startOnLoad: true,
		flowchart: {
			useMaxWidth: true
		}
	});
</script>
<div class="mermaid" align="center" >
	
graph LR;
    new(<strong>new book</strong>)
    A[book 1]
    B[book 2]
    N>NULL]    

    B -.->|next| new
    new -->|next| N
    A -->|next| B

</div>

<p>That was quite simple, wasn&rsquo;t it? What if we want it to add new books to <strong>the beginning</strong> of the library? You cannot change the <code>Book* library</code> pointer as it is copied over by-value. For this to work, we need to change the signature to a <em>pointer of a pointer</em>: <code>void add_book(Book** library, Book* book)</code>.</p>

<p>Use the following main function to test your code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C"><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
    Book<span style="color:#f92672">*</span> library <span style="color:#f92672">=</span> create_books();
    Book<span style="color:#f92672">*</span> newbook <span style="color:#f92672">=</span> create_book(<span style="color:#e6db74">&#34;My adventures&#34;</span>, <span style="color:#e6db74">&#34;The Hero&#34;</span>);
    <span style="color:#75715e">// add newbook to the library. But how? 
</span><span style="color:#75715e"></span>    print_books(library);
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}</code></pre></div>

<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="../../ch3-pointers/pointers/" title="3.1: Pointers and arrays"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../ch4-debugging/" title="4: Debugging" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1582123184"></script>
    <script src="../../js/perfect-scrollbar.min.js?1582123184"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1582123184"></script>
    <script src="../../js/jquery.sticky.js?1582123184"></script>
    <script src="../../js/featherlight.min.js?1582123184"></script>
    <script src="../../js/highlight.pack.js?1582123184"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js?1582123184"></script>
    <script src="../../js/learn.js?1582123184"></script>
    <script src="../../js/hugo-learn.js?1582123184"></script>

    <link href="../../mermaid/mermaid.css?1582123184" rel="stylesheet" />
    <script src="../../mermaid/mermaid.js?1582123184"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

