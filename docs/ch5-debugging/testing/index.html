<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.81.0" />
    <meta name="description" content="">


    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>5.3: The Middle Way: TDD :: Operating Systems and C</title>

    
    <link href="../../css/nucleus.css?1680267095" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1680267095" rel="stylesheet">
    <link href="../../css/hybrid.css?1680267095" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1680267095" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1680267095" rel="stylesheet">
    <link href="../../css/auto-complete.css?1680267095" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1680267095" rel="stylesheet">
    <link href="../../css/theme.css?1680267095" rel="stylesheet">
    <link href="../../css/devselector.css?1680267095" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1680267095" rel="stylesheet">
    <link href="../../css/theme-kul.css?1680267095" rel="stylesheet">
    

    <script src="../../js/jquery-3.3.1.min.js?1680267095"></script>
    <script src="../../js/devselector.js?1680267095"></script>
    <script id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
    </script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    <script src="../../js/osc.js"></script>

  </head>
  <body class="" data-url="../../ch5-debugging/testing/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="https://www.kuleuven.be/kuleuven/" target="_blank">
  <img src="../../images/kul.png" alt="KU Leuven" /><br/>
</a>
<a href="https://www.uhasselt.be/" target="_blank">
  <img src="../../images/uhasselt.svg" alt="UHasselt" id="uhlogo" />
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1680267095"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1680267095"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/kuleuven-diepenbeek.github.io\/osc-course\/";
    
</script>
<script type="text/javascript" src="../../js/search.js?1680267095"></script>

    
  </div>

    <div class="highlightable">

      <h3><a href="../../">Course Contents</a></h3>
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/ch1-introos/" title="1: Intro in OS" class="dd-item
        
        
        
        ">
      <a href="../../ch1-introos/">
          <i class='fab fa-linux'></i> 1: Intro in OS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch1-introos/intro-os/" title="1.1: Intro to OS using Linux" class="dd-item ">
        <a href="../../ch1-introos/intro-os/">
        <i class='fas fa-book'></i> 1.1: Intro to OS using Linux
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch1-introos/filesystems/" title="1.2: File systems" class="dd-item ">
        <a href="../../ch1-introos/filesystems/">
        <i class='fab fa-linux'></i> 1.2: File systems
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch1-introos/cli/" title="1.3: Getting your CLI-feet wet" class="dd-item ">
        <a href="../../ch1-introos/cli/">
        <i class='fas fa-vial'></i> 1.3: Getting your CLI-feet wet
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch2-c/" title="2: Introduction in C" class="dd-item
        
        
        
        ">
      <a href="../../ch2-c/">
          <i class='far fa-keyboard'></i> 2: Introduction in C
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch2-c/intro/" title="2.1: The C programming language" class="dd-item ">
        <a href="../../ch2-c/intro/">
        <i class='fas fa-book'></i> 2.1: The C programming language
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch2-c/intro-labs/" title="2.2: String Manipulation" class="dd-item ">
        <a href="../../ch2-c/intro-labs/">
        <i class='fas fa-vial'></i> 2.2: String Manipulation
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch2-c/structs/" title="2.3: Creating order: Structures" class="dd-item ">
        <a href="../../ch2-c/structs/">
        <i class='fas fa-book'></i> 2.3: Creating order: Structures
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch2-c/structs-labs/" title="2.4: Structs" class="dd-item ">
        <a href="../../ch2-c/structs-labs/">
        <i class='fas fa-vial'></i> 2.4: Structs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch2-c/ecosystems/" title="2.5: C Ecosystems" class="dd-item ">
        <a href="../../ch2-c/ecosystems/">
        <i class='fas fa-book'></i> 2.5: C Ecosystems
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch2-c/ecosystems-labs/" title="2.6: Splitting up Code" class="dd-item ">
        <a href="../../ch2-c/ecosystems-labs/">
        <i class='fas fa-vial'></i> 2.6: Splitting up Code
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch3-introcpu/" title="3: Introduction in CPU" class="dd-item
        
        
        
        ">
      <a href="../../ch3-introcpu/">
          <i class='fab fa-linux'></i> 3: Introduction in CPU
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch3-introcpu/1_vonneumann/" title="3.1 Von Neumann Architecture" class="dd-item ">
        <a href="../../ch3-introcpu/1_vonneumann/">
        <i class='fab fa-linux'></i> 3.1 Von Neumann Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch3-introcpu/1_lab_assembly/" title="3.2: Assembly basics" class="dd-item ">
        <a href="../../ch3-introcpu/1_lab_assembly/">
        <i class='fas fa-vial'></i> 3.2: Assembly basics
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch3-introcpu/2_functions/" title="3.3 Functions and The Stack" class="dd-item ">
        <a href="../../ch3-introcpu/2_functions/">
        <i class='fab fa-linux'></i> 3.3 Functions and The Stack
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch3-introcpu/2_lab_stack/" title="3.4: The Stack" class="dd-item ">
        <a href="../../ch3-introcpu/2_lab_stack/">
        <i class='fas fa-vial'></i> 3.4: The Stack
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch4-pointers/" title="4: Pointers &amp; Arrays" class="dd-item
        
        
        
        ">
      <a href="../../ch4-pointers/">
          <i class='far fa-keyboard'></i> 4: Pointers &amp; Arrays
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch4-pointers/pointers/" title="4.1: Pointers and arrays" class="dd-item ">
        <a href="../../ch4-pointers/pointers/">
        <i class='far fa-keyboard'></i> 4.1: Pointers and arrays
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch4-pointers/practical-use/" title="4.2: Practical Use of Pointers" class="dd-item ">
        <a href="../../ch4-pointers/practical-use/">
        <i class='far fa-keyboard'></i> 4.2: Practical Use of Pointers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch4-pointers/lab/" title="4.3: The Ancient Library" class="dd-item ">
        <a href="../../ch4-pointers/lab/">
        <i class='fas fa-vial'></i> 4.3: The Ancient Library
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch5-debugging/" title="5: Debugging" class="dd-item
        parent
        
        
        ">
      <a href="../../ch5-debugging/">
          <i class='far fa-keyboard'></i> 5: Debugging
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch5-debugging/debugging-ide/" title="5.1: The Easy Way: IDEs" class="dd-item ">
        <a href="../../ch5-debugging/debugging-ide/">
        <i class='far fa-keyboard'></i> 5.1: The Easy Way: IDEs
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch5-debugging/testing/" title="5.3: The Middle Way: TDD" class="dd-item active">
        <a href="../../ch5-debugging/testing/">
        <i class='far fa-keyboard'></i> 5.3: The Middle Way: TDD
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch5-debugging/debugging-gdb/" title="5.2: The Hard Way: GDB" class="dd-item ">
        <a href="../../ch5-debugging/debugging-gdb/">
        <i class='fas fa-vial'></i> 5.2: The Hard Way: GDB
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch6-tasks/" title="6: Task management" class="dd-item
        
        
        
        ">
      <a href="../../ch6-tasks/">
          <i class='fab fa-linux'></i> 6: Task management
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/processes/" title="6.1: Processes" class="dd-item ">
        <a href="../../ch6-tasks/processes/">
        <i class='fas fa-book'></i> 6.1: Processes
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/lab1_processmgmt/" title="6.2: Processes (lab)" class="dd-item ">
        <a href="../../ch6-tasks/lab1_processmgmt/">
        <i class='fas fa-vial'></i> 6.2: Processes (lab)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/interprocess/" title="6.3: Inter Process communication" class="dd-item ">
        <a href="../../ch6-tasks/interprocess/">
        <i class='fas fa-book'></i> 6.3: Inter Process communication
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/threads/" title="6.4: Threads" class="dd-item ">
        <a href="../../ch6-tasks/threads/">
        <i class='fas fa-book'></i> 6.4: Threads
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/lab2_threadsmgmt/" title="6.5: Threads (lab)" class="dd-item ">
        <a href="../../ch6-tasks/lab2_threadsmgmt/">
        <i class='fas fa-vial'></i>6.5: Threads (lab)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/interthread/" title="6.6: Inter Thread communication" class="dd-item ">
        <a href="../../ch6-tasks/interthread/">
        <i class='fas fa-book'></i> 6.6: Inter Thread communication
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch6-tasks/lab3_interthreadcomm/" title="6.7: Inter-Thread communication (lab)" class="dd-item ">
        <a href="../../ch6-tasks/lab3_interthreadcomm/">
        <i class='fas fa-vial'></i> 6.7: Inter-Thread communication (lab)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch7-scheduling/" title="7: CPU scheduling" class="dd-item
        
        
        
        ">
      <a href="../../ch7-scheduling/">
          <i class='fab fa-linux'></i> 7: CPU scheduling
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch7-scheduling/algorithms/" title="7.1: Scheduling algorithms" class="dd-item ">
        <a href="../../ch7-scheduling/algorithms/">
        <i class='fas fa-book'></i> 7.1: Scheduling algorithms
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch7-scheduling/lab1_algorithms/" title="7.2: Scheduling algorithms (lab)" class="dd-item ">
        <a href="../../ch7-scheduling/lab1_algorithms/">
        <i class='fas fa-vial'></i> 7.2: Scheduling algorithms (lab)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch7-scheduling/towards/" title="7.3: Towards real-world schedulers" class="dd-item ">
        <a href="../../ch7-scheduling/towards/">
        <i class='fas fa-book'></i> 7.3: Towards real-world schedulers
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch7-scheduling/lab2_niceguy/" title="7.4: Mr. nice guy(lab)" class="dd-item ">
        <a href="../../ch7-scheduling/lab2_niceguy/">
        <i class='fas fa-vial'></i> 7.4: Mr. nice guy(lab)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch8-stack/" title="8: The Stack &amp; The Heap" class="dd-item
        
        
        
        ">
      <a href="../../ch8-stack/">
          <i class='far fa-keyboard'></i> 8: The Stack &amp; The Heap
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch8-stack/stackvsheap/" title="8.1: The Stack &amp; the Heap" class="dd-item ">
        <a href="../../ch8-stack/stackvsheap/">
        <i class='fas fa-book'></i> 8.1: The Stack &amp; the Heap
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch8-stack/inspection-labs/" title="8.2: Inspecting memory regions" class="dd-item ">
        <a href="../../ch8-stack/inspection-labs/">
        <i class='fas fa-vial'></i> 8.2: Inspecting memory regions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch8-stack/scope/" title="8.3: Different Scopes in C" class="dd-item ">
        <a href="../../ch8-stack/scope/">
        <i class='fas fa-book'></i> 8.3: Different Scopes in C
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/ch9-memory/" title="9: Memory Management" class="dd-item
        
        
        
        ">
      <a href="../../ch9-memory/">
          <i class='fab fa-linux'></i> 9: Memory Management
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ch9-memory/memory/" title="9.1: Memory management" class="dd-item ">
        <a href="../../ch9-memory/memory/">
        <i class='fas fa-book'></i> 9.1: Memory management
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch9-memory/lab1_segfault/" title="9.2: Deliberate Segfaulting" class="dd-item ">
        <a href="../../ch9-memory/lab1_segfault/">
        <i class='fas fa-vial'></i> 9.2: Deliberate Segfaulting
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch9-memory/paging/" title="9.3: Paging" class="dd-item ">
        <a href="../../ch9-memory/paging/">
        <i class='fas fa-book'></i> 9.3: Paging
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/ch9-memory/lab2_browsing/" title="9.4: Simply browsing through pages" class="dd-item ">
        <a href="../../ch9-memory/lab2_browsing/">
        <i class='fas fa-vial'></i> 9.4: Simply browsing through pages
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/chx-cs/" title="X: Capita Selecta" class="dd-item
        
        
        
        ">
      <a href="../../chx-cs/">
          <i class='fab fa-linux'></i> X: Capita Selecta
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/chx-cs/rtos/" title="X.2: Real-time Operating Systems" class="dd-item ">
        <a href="../../chx-cs/rtos/">
        <i class='fab fa-linux'></i> X.2: Real-time Operating Systems
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/chx-cs/devdrivers/" title="X.3: Device Drivers" class="dd-item ">
        <a href="../../chx-cs/devdrivers/">
        <i class='fab fa-linux'></i> X.3: Device Drivers
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/exercises/" title="A. Assignments" class="dd-item
        
        
        
        ">
      <a href="../../exercises/">
          <i class='fas fa-pencil-alt'></i> A. Assignments
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/exercises/c-integrated-ex/" title="1. Integrated C exercise" class="dd-item ">
        <a href="../../exercises/c-integrated-ex/">
        <i class='fas fa-pen-square'></i> 1. Integrated C exercise
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/exercises/c-debugging-testing/" title="2. Testing in C(&#43;&#43;)" class="dd-item ">
        <a href="../../exercises/c-debugging-testing/">
        <i class='fas fa-pen-square'></i> 2. Testing in C(&#43;&#43;)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/exercises/none-yet/" title="None yet!" class="dd-item ">
        <a href="../../exercises/none-yet/">
        <i class='fas fa-pen-square'></i> None yet!
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/appendix/" title="B. Appendix" class="dd-item
        
        
        
        ">
      <a href="../../appendix/">
          <i class='fab fa-github'></i> B. Appendix
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/appendix/reading/" title="1. Recommended reading" class="dd-item ">
        <a href="../../appendix/reading/">
        1. Recommended reading
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/appendix/installing/" title="2. Linux Installation Instructions" class="dd-item ">
        <a href="../../appendix/installing/">
        2. Linux Installation Instructions
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/appendix/cheat_sheet/" title="Cheat sheet" class="dd-item ">
        <a href="../../appendix/cheat_sheet/">
        Cheat sheet
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://uhintra03.uhasselt.be/studiegidswww/opleidingsonderdeel.aspx?a=2019&amp;i=4082&amp;n=4&amp;t=01"><i class='fa fa-university'></i> ECTS Sheet</a>
              </li>
          
              <li>
                  <a class="padding" href="https://kuleuven-diepenbeek.github.io/osc-course/TODO"><i class='fa fa-university'></i> Toledo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='../../'>Operating Systems and C</a> > <a href='../../ch5-debugging/'>5: Debugging</a> > 5.3: The Middle Way: TDD
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#test-driven-development-google-test">Test-Driven Development: Google Test</a>
      <ul>
        <li><a href="#a-installation">A. Installation</a></li>
        <li><a href="#b-usage">B. Usage</a></li>
        <li><a href="#c-debugging-with-gtest">C. &lsquo;Debugging&rsquo; with GTest</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              5.3: The Middle Way: TDD
            </h1>
          

        


<h2 id="test-driven-development-google-test">Test-Driven Development: Google Test</h2>
<p>A concept you learned to love in the <a href="https://kuleuven-diepenbeek.github.io/ses-course/tdd/">Software Engineering Skills</a> course.</p>
<p>It&rsquo;s concepts and definitions will <strong>not</strong> be repeated here, but we will introduce <strong>Google Test</strong>, a unit testing framework for C/C++ that enables us to write tests to track down bugs and <strong>reduce the amount of time needed dabbling in <code>gdb</code></strong>. That is one of the major advantages of using automated test frameworks.</p>

<div class="notices warning" ><p>Google Test is a <code>C++</code> (11) framework, not a <code>C</code> framework! We will be using <code>g++</code> instead of <code>gcc</code> to compile everything. C++ files are suffixed with <code>.cpp</code> instead of <code>.c</code>.<br/>
Major differences between both languages exist but will not be needed to know all about in order to write a few simple tests.<br/><br/>
Since <code>g++</code> and the tool we need to build it, <code>cmake</code>, are not installed on the image by default, use <code>apt install g++ cmake</code> to download and install the toolchains.</p>
</div>

<h3 id="a-installation">A. Installation</h3>
<p>Most open source libraries require you to download the source code and compile it yourself. For Google Test, we will do exactly that, since we are learning how to work with compiling and making things anyway. We want to only compile <em>googletest</em>, and not <em>googlemock</em> - both are part of the same repository.</p>
<ul>
<li>Clone the github repository: <a href="https://github.com/google/googletest/">https://github.com/google/googletest/</a>. We want to build branch <code>v1.12.x</code> - the <code>master</code> branch is too unstable. Remember how to switch to that branch? Use <code>git branch -a</code> to see all branches, and <code>git checkout -b [name] remotes/origin/[name]</code> to check it out locally. Verify with <code>git branch</code>.</li>
<li>Create a builddir and navigate into it: <code>mkdir build</code>, <code>cd build</code></li>
<li>Build Makefiles using Cmake: <code>cmake ./../</code></li>
<li>Build binaries using make: <code>make</code>.</li>
</ul>
<p>More information about CMake can be found in <a href="../../ch2-c/ecosystems/#3-cmake">chapter 2.5: C Ecosystems</a>.</p>
<p>If all goes according to plan, four libraries will have been created:</p>
<ol>
<li><code>libgtest.a</code></li>
<li><code>ligbtest_main.a</code></li>
<li><code>libgmock.a</code> (we won&rsquo;t use this)</li>
<li><code>libgmock_main.a</code> (we won&rsquo;t use this)</li>
</ol>
<p>In the subfolder <code>googletest/build/lib</code>.</p>
<h3 id="b-usage">B. Usage</h3>
<p>Using the library is a matter of doing two things:</p>
<h4 id="1-adding-include-folders">1. Adding include folders</h4>
<p>You will need a <code>main()</code> function to bootstrap the framework:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">// main.cpp
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;gtest/gtest.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#00a8c8">int</span> <span style="color:#75af00">main</span><span style="color:#111">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">argc</span><span style="color:#111">,</span> <span style="color:#00a8c8">char</span> <span style="color:#f92672">*</span><span style="color:#111">argv</span><span style="color:#111">[])</span> <span style="color:#111">{</span>
    <span style="color:#f92672">::</span><span style="color:#111">testing</span><span style="color:#f92672">::</span><span style="color:#111">InitGoogleTest</span><span style="color:#111">(</span><span style="color:#f92672">&amp;</span><span style="color:#111">argc</span><span style="color:#111">,</span> <span style="color:#111">argv</span><span style="color:#111">);</span>
    <span style="color:#00a8c8">return</span> <span style="color:#111">RUN_ALL_TESTS</span><span style="color:#111">();</span>
<span style="color:#111">}</span>
</code></pre></div><p>And another file where our tests reside:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#75715e">// test.cpp
</span><span style="color:#75715e"></span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;gtest/gtest.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#00a8c8">int</span> <span style="color:#75af00">add</span><span style="color:#111">(</span><span style="color:#00a8c8">int</span> <span style="color:#111">one</span><span style="color:#111">,</span> <span style="color:#00a8c8">int</span> <span style="color:#111">two</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#00a8c8">return</span> <span style="color:#111">one</span> <span style="color:#f92672">+</span> <span style="color:#111">two</span><span style="color:#111">;</span>
<span style="color:#111">}</span>

<span style="color:#111">TEST</span><span style="color:#111">(</span><span style="color:#111">AddTest</span><span style="color:#111">,</span> <span style="color:#111">ShouldAddOneAndTo</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#111">EXPECT_EQ</span><span style="color:#111">(</span><span style="color:#111">add</span><span style="color:#111">(</span><span style="color:#ae81ff">1</span><span style="color:#111">,</span> <span style="color:#ae81ff">2</span><span style="color:#111">),</span> <span style="color:#ae81ff">5</span><span style="color:#111">);</span>
<span style="color:#111">}</span>

<span style="color:#111">TEST</span><span style="color:#111">(</span><span style="color:#111">AddTest</span><span style="color:#111">,</span> <span style="color:#111">ShouldAlsoBeAbleToAddNegativeValues</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#111">EXPECT_EQ</span><span style="color:#111">(</span><span style="color:#111">add</span><span style="color:#111">(</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#111">,</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#111">),</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#111">);</span>
<span style="color:#111">}</span>
</code></pre></div><p>What&rsquo;s important here is the include that refers to a <code>gtest/gtest.h</code> file. The gtest directory resides in the include folder of your google test installation directory. That means somehow we have to educate the compiler on <strong>where to look for the includes</strong>!</p>

<div class="notices note" ><p>The <code>-I[directory]</code> (I = include) flag is used to tell <code>g++</code> where to look for includes.</p>
</div>

<h4 id="2-linking-with-the-compiled-libraries">2. Linking with the compiled libraries</h4>
<p>When running the binary <code>main()</code> method, Google Test will output a report of which test passed and which test failed:</p>
<pre>
Wouters-MacBook-Air:unittest wgroenev$ ./cmake-build-debug/unittest
[==========] Running 2 tests from 2 test cases.
[----------] Global test environment set-up.
[----------] 1 test from SuiteName
[ RUN      ] SuiteName.TrueIsTrue
[       OK ] SuiteName.TrueIsTrue (0 ms)
[----------] 1 test from SuiteName (0 ms total)

[----------] 1 test from AddTest
[ RUN      ] AddTest.ShouldAddOneAndTo
/Users/wgroenev/CLionProjects/unittest/test.cpp:18: Failure
      Expected: add(1, 2)
      Which is: 3
To be equal to: 5
[  FAILED  ] AddTest.ShouldAddOneAndTo (0 ms)
[----------] 1 test from AddTest (0 ms total)

[----------] Global test environment tear-down
[==========] 2 tests from 2 test cases ran. (0 ms total)
[  PASSED  ] 1 test.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] AddTest.ShouldAddOneAndTo

 1 FAILED TEST
</pre>
<p>However, before being able to run everything, <code>InitGoogleTest()</code> is implemented somewhere in the libraries we just compiled. That means we need to tell the compiler to <strong>link the Google Test libraries</strong> to our own application.</p>

<div class="notices note" ><p>Add libraries as arguments to the compiler while linking. Remember to first use the <code>-c</code> flag, and afterwards link everything together.</p>
</div>

<p>Bringing everything together:</p>
<pre>
Wouters-MacBook-Air:debugging wgroeneveld$ g++ -I$GTEST_DIR/googletest/include -c gtest-main.cpp
Wouters-MacBook-Air:debugging wgroeneveld$ g++ -I$GTEST_DIR/googletest/include -c gtest-tests.cpp
Wouters-MacBook-Air:debugging wgroeneveld$ g++ gtest-main.o gtest-tests.o $GTEST_DIR/build/lib/libgtest.a $GTEST_DIR/build/lib/libgtest_main.a  -lpthread
Wouters-MacBook-Air:debugging wgroeneveld$ ./a.out
[==========] Running 2 tests from 1 test case.
[----------] Global test environment set-up.
[----------] 2 tests from AddTest
[ RUN      ] AddTest.ShouldAddOneAndTo    
</pre>
<p>As you can see, it can be handy to create a shell variable <code>$GTEST_DIR</code> that points to your own Google Test directory. To do that, edit the <code>.bashrc</code> file in your <code>~</code> (home) folder. Remember that files starting with a dot are hidden by default, so use the <code>-a</code> flag of the <code>ls</code> command. Add the line:</p>
<p><code>export GTEST_DIR=/home/[user]/googletest/googletest</code></p>
<p>And reopen all terminals. Verify the above using <code>echo $GTEST_DIR</code>, it should print out the path.</p>
<p>If you are using a different shell, edit your shell&rsquo;s config file. If you have no idea which shell you&rsquo;re using, you&rsquo;re probably using Bash. Verify with <code>echo $SHELL</code> which will likely output <code>/bin/bash</code>.</p>

<div class="notices note" ><p>The <code>-lpthread</code> linking flag tells the compiler to link the standard threading libraries along with anything else, that are needed by GTest internally. We will get back on these in <a href="../../ch6-tasks">chapter 6</a>. <br/>
Without this flag, you will get the following errors: &ldquo;ld returned 1 exit status, undefined reference to pthread_[fn]&rdquo;</p>
</div>

<h3 id="c-debugging-with-gtest">C. &lsquo;Debugging&rsquo; with GTest</h3>
<p>Going back to the crackme implementation, a simplified method that verifies input is the following:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#00a8c8">int</span> <span style="color:#75af00">verify</span><span style="color:#111">(</span><span style="color:#00a8c8">char</span><span style="color:#f92672">*</span> <span style="color:#111">pwd</span><span style="color:#111">)</span> <span style="color:#111">{</span>
    <span style="color:#75715e">// return 1 if verified against a pre-determined password, 0 otherwise.
</span><span style="color:#75715e"></span><span style="color:#111">}</span>
</code></pre></div>
<div class="ex">
	<div class="inner">
    	<p>Write a set of tests for the above method - <strong>BEFORE</strong> implementing it yourself! Time to hone your TDD skills acquired from the course &lsquo;Software Engineering Skills&rsquo;. Simply copy it into the test file, or include it from somewhere else.<br/> You should at least have the following edge cases:</p>
<ul>
<li>right password entered</li>
<li>wrong password entered</li>
<li>empty password (what about <code>NULL</code> or <code>&quot;&quot;</code>?)</li>
</ul>
<p>Use the GTest macro <code>EXPECT_TRUE</code> and <code>EXPECT_FALSE</code>. These correspond to JUnit&rsquo;s <code>AssertTrue()</code> and <code>AssertFalse()</code>.</p>
<p>Again, watch out with the order in which parameters should be passed (expected/actual)! See <a href="https://github.com/google/googletest/blob/master/googletest/docs/primer.md">Google Test Primer</a>.</p>

	</div>
</div>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../ch5-debugging/debugging-ide/" title="5.1: The Easy Way: IDEs"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../ch5-debugging/debugging-gdb/" title="5.2: The Hard Way: GDB" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1680267095"></script>
    <script src="../../js/perfect-scrollbar.min.js?1680267095"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1680267095"></script>
    <script src="../../js/jquery.sticky.js?1680267095"></script>
    <script src="../../js/featherlight.min.js?1680267095"></script>
    <script src="../../js/modernizr.custom-3.6.0.js?1680267095"></script>
    <script src="../../js/learn.js?1680267095"></script>
    <script src="../../js/hugo-learn.js?1680267095"></script>
    
        
            <script src="../../mermaid/mermaid.js?1680267095"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    <script>
    window.MathJax = {
      chtml: {
        scale: 2,                      
        minScale: .5,                  
        matchFontHeight: true,         
        mtextInheritFont: false,       
        merrorInheritFont: true,       
        mathmlSpacing: false,          
        skipAttributes: {},            
        exFactor: .5,                  
        displayAlign: 'center',        
        displayIndent: '0'             
      }
    };
    </script>
    
    

  </body>
</html>

